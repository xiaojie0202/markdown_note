# numpy
    提供了一个在Python中做科学计算的基础库，重在数值计算，主要用于多维数组（矩阵）处理的库。用来存储和处理大型矩阵，比Python自身的嵌套列表结构要高效的多。本身是由C语言开发，是个很基础的扩展，Python其余的科学计算扩展大部分都是以此为基础。
- 高性能科学计算和数据分析的基础包
- ndarray，多维数组（矩阵），具有矢量运算能力，快速、节省空间
- 矩阵运算，无需循环，可完成类似Matlab中的矢量运算
- 线性代数、随机数生成
## ndarray 多维数组(N Dimension Array)
    NumPy数组是一个多维的数组对象（矩阵），称为ndarray，具有矢量算术运算能力和复杂的广播能力，并具有执行速度快和节省空间的特点。
- 注意：ndarray的下标从0开始，且数组里的所有元素必须是相同类型
### 矩阵（数组）的轴
    在numpy中可以理解为方向,使用0,1,2...数字表示
1. 对于一个一维数组,只有一个0轴,

2. 对于2维数组(shape(2,2)),有0轴和1轴,
![](https://note.youdao.com/yws/public/resource/4d9f2b353221035aa2dc87736c84e628/xmlnote/0F79A0E90C27462CBE2A2D10B21216BA/7564)

3. 对于三维数组(shape(2,2, 3)),有0,1,2轴
![](https://note.youdao.com/yws/public/resource/4d9f2b353221035aa2dc87736c84e628/xmlnote/8FC1F9D8DB274C15A868628D2FE100AD/7566)
### numpy中常见的数据类型
![](https://note.youdao.com/yws/public/resource/4d9f2b353221035aa2dc87736c84e628/xmlnote/FCC962A58F374EAAA6D1AB4826DC5F79/7562)
### 创建数组（矩阵）
```python
import numpy as np

# 创建array([1, 2, 3, 4, 5])的三种方式
a = np.array([1, 2, 3, 4, 5])
b = np.array(range(1, 6))
c = np.arange(1, 6) # arange(start， stop， step， dtype)


# 创建指定数据类型的数组
a = np.array([1, 2, 3, 4, 5], dtype=np.int8)
b = np.array(range(1, 6), dtype=np.float16)
c = np.arange(1, 6, 1, dtype=np.int64)

type(a)  # 类型为： numpy.ndarray
a.dtype  # 数组中的元素类型为 ：dtype('int32')
```
### 数组元素类型操作

```python
import numpy as np
import random

a = np.array([1, 0, 1, 1, 0], dtype=np.bool)
# array([ True, False,  True,  True, False])

# 修改数据类型
a.astype(np.int8)  # array([1, 0, 1, 1, 0], dtype=int8)

# 修改浮点型的小数位数
b = np.array([random.random() for i in range(10)])  # array([0.72230013, 0.09008776, 0.65508131, 0.53060149, 0.15134808, 0.24458532, 0.86133992, 0.74621026, 0.00197456, 0.63358835])
np.round(b, 2)  # array([0.72, 0.09, 0.66, 0.53, 0.15, 0.24, 0.86, 0.75, 0.  , 0.63])
```
### 数组的形状
>- 创建各种形状数组
```python
import numpy as np

# 一位数组
a = np.arange(10)  # array([0, 1, 2, 3, 4, 5, 6, 7, 8, 9])
a.shape  # (10,) 相当于一维数组，10表示十个元素

# 二位数组
b = np.array([[1, 2, 3], [4, 5, 6]])
b.shape  # (2, 3)  # 表示有2行数组， 每个数组3个元素

# 三位数组
c = np.array([[1, 2, 3], [4, 5, 6], [7, 8, 9]])
'''
array([[1, 2, 3],
       [4, 5, 6],
       [7, 8, 9]])
'''
c.shape  # (3, 3) 三行三列

# 多维数组
d = np.array([[[1, 2, 3], [4, 5, 6], [7, 8, 9]], [[10, 11, 12], [13, 14, 15], [16, 117, 18]]])
'''
array([[[  1,   2,   3],
        [  4,   5,   6],
        [  7,   8,   9]],

       [[ 10,  11,  12],
        [ 13,  14,  15],
        [ 16, 117,  18]]])
'''
d.shape  # (2, 3, 3) 表示两个块， 每个块3行，每行3个元素

f = np.array([[[1, 2, 3], [4, 5, 6]], [[7, 8, 9], [10, 11, 12]], [[13, 14, 15], [16, 17, 18]]])
'''
array([[[ 1,  2,  3],
        [ 4,  5,  6]],

       [[ 7,  8,  9],
        [10, 11, 12]],

       [[13, 14, 15],
        [16, 17, 18]]])
'''
f.shape  # (3, 2, 3) 三块，每块两行，每行三个元素
```
>- 修改数组形状
```python
import numpy as np

a = np.arange(12)  # array([ 0,  1,  2,  3,  4,  5,  6,  7,  8,  9, 10, 11])
a = a.reshape(3, 4)  # 变换数组形状三行四列
'''
array([[ 0,  1,  2,  3],
       [ 4,  5,  6,  7],
       [ 8,  9, 10, 11]])
'''

b = np.arange(24).reshape(2, 3, 4)  # 把一维数组转换成二块，三行，四列
'''
array([[[ 0,  1,  2,  3],
        [ 4,  5,  6,  7],
        [ 8,  9, 10, 11]],

       [[12, 13, 14, 15],
        [16, 17, 18, 19],
        [20, 21, 22, 23]]])
'''
# 多维数组展开成一维数组
c = np.array([[[1, 2, 3], [4, 5, 6], [7, 8, 9]], [[10, 11, 12], [13, 14, 15], [16, 117, 18]]])
c.flatten()
'''
array([  1,   2,   3,   4,   5,   6,   7,   8,   9,  10,  11,  12,  13, 14,  15,  16, 117,  18])
'''

```
### 数组（矩阵）的计算
    数组是编程中的概念，矩阵、矢量是数学概念。在计算机编程中，矩阵可以用数组形式定义，矢量可以用结构定义!矩阵是可以做运算的
1. 相同大小的数组运算
```python
import numpy as np
c = np.array([[[1, 2, 3], [4, 5, 6], [7, 8, 9]], [[10, 11, 12], [13, 14, 15], [16, 117, 18]]])
print(c+c)
'''
[[[  2   4   6]
  [  8  10  12]
  [ 14  16  18]]

 [[ 20  22  24]
  [ 26  28  30]
  [ 32 234  36]]]
'''
print(c-c)
'''
[[[0 0 0]
  [0 0 0]
  [0 0 0]]

 [[0 0 0]
  [0 0 0]
  [0 0 0]]]
'''
print(c*c)
print(c/c)
```
2. 数组和标量的运算
    数组和一个标量的运算，相当于数组每个元素和标量运算
```python
import numpy as np

c = np.array([[[1, 2, 3], [4, 5, 6], [7, 8, 9]], [[10, 11, 12], [13, 14, 15], [16, 117, 18]]])
print(c * 10)
'''
[[[  10   20   30]
  [  40   50   60]
  [  70   80   90]]

 [[ 100  110  120]
  [ 130  140  150]
  [ 160 1170  180]]]
'''
```
3. 多维数组与多维数组的运算
```python
import numpy as np

a = np.array([[[1, 2, 3], [4, 5, 6], [7, 8, 9]], [[10, 11, 12], [13, 14, 15], [16, 117, 18]]])

b = np.array([1, 2, 3])
print(a + b)
# 相当于a的每行跟b进行运算
'''
# 内部运算原理
   [1 2 3]                   [1+1 2+2 3+3]      [2 4 6]
   [4 5 6]   +   [1 2 3]  =  [4+1 5+2 6+3]  =   [5 7 9]
   [7 8 9]                   [7+1 8+2 9+3]      [8 10 12]

    [10 11 12]              [10+1 11+2 12+3]        [11 13 15]
    [13 14 15] + [1 2 3] =  [13+1 14+2 15+3]  =     [14 15 18]
    [16 17 18]              [16+1 117+2 18+3]       [17 119 21]
# 运行结果
[[[  2   4   6]
  [  5   7   9]
  [  8  10  12]]

 [[ 11  13  15]
  [ 14  16  18]
  [ 17 119  21]]]
'''

c = np.array([[1], [2], [3]])
print(a + c)
'''
# 内部运算原理
[1 2 3]     [1]     [1+1 2+1 3+1]       [2 3 4]
[4 5 6]  +  [2]  =  [4+2 5+2 6+2]  =    [6 7 8]
[7 8 9]     [3]     [7+3 8+3 9+3]       [10 11 13]

[10 11 13]      [1]     [10+1 11+1 13+1]       [11 12 13]
[13 14 15]  +   [2]  =  [13+2 14+2 15+2]  =    [15 16 17]
[16 117 18]     [3]     [16+3 117+3 18+3]      [19 120 21]

# 执行结果
[[[  2   3   4]
  [  6   7   8]
  [ 10  11  12]]

 [[ 11  12  13]
  [ 15  16  17]
  [ 19 120  21]]]

'''
d = np.array([[10, 20, 30], [40, 50, 60], [70, 80, 90]])
print(a + d)
'''
# 内部运算原理
[1 2 3]     [10 20 30]     [1+10 2+20 3+30]     [11 22 33]
[4 5 6] +   [40 50 60] =   [4+40 5+50 6+60]  =  [44 55 66]
[7 8 9]     [70 80 90]     [7+70 8+80 9+90]     [77 88 99]

[10 11 12]      [10 20 30]      [10+10 11+20 12+20]         [20 31 42]
[13 14 15]   =  [40 50 60]   =  [40+13 50+14 15+60]    =    [53 64 75]
[16 117 18]     [70 80 90]      [16+70 117+80 18+90]        [86 197 108]

# 执行结果
[[[ 11  22  33]
  [ 44  55  66]
  [ 77  88  99]]

 [[ 20  31  42]
  [ 53  64  75]
  [ 86 197 108]]]
'''
```
### numpy读取数据
    numpy通常从CSV文件中读取数据
>- np.loadtxt(fname,dtype=np.float,delimiter=None,skiprows=0,usecols=None,unpack=False)

|参数|解释|
|---|---|
|frame| 文件的绝路径， 可以是.gz或者.bz2压缩文件|
|dtype|np读取的元素的数据类型|
|delimiter|指定文中的分割字符串， 默认是空格， CSV文件需要改为逗号|
|skiprows| 跳过当前X行， 一般跳过行头|
|usecols| 读取指定的列， 索引， 元祖类型|
|umpack|默认是False， 按文件中的每行做一个行， 如果未True则相当于文件中的一行数据做列， 相当于转置|
### numpy中的转置
    转置是一种变换,对于numpy中的数组来说,就是在对角线方向交换数据,目的也是为了更方便的去处理数据

```python
import numpy as np
a = np.array([[ 1,  2,  3,  4,  5,  6],
       [ 7,  8,  9, 10, 11, 12],
       [13, 14, 15, 16, 17, 18]])

a.transpose()
'''
array([[ 1,  7, 13],
       [ 2,  8, 14],
       [ 3,  9, 15],
       [ 4, 10, 16],
       [ 5, 11, 17],
       [ 6, 12, 18]])

'''
a.swapaxes(1,0) # 1轴和0轴旋转
'''
array([[ 1,  7, 13],
       [ 2,  8, 14],
       [ 3,  9, 15],
       [ 4, 10, 16],
       [ 5, 11, 17],
       [ 6, 12, 18]])
'''
a.T
'''
array([[ 1,  7, 13],
       [ 2,  8, 14],
       [ 3,  9, 15],
       [ 4, 10, 16],
       [ 5, 11, 17],
       [ 6, 12, 18]])
'''
```
### numpy索引和切片
```python
import numpy as np

a = np.array([[1, 2, 3, 4], [5, 6, 7, 8], [9, 10, 11, 12], [13, 14, 15, 16], [17, 18, 19, 20], [21, 22, 23, 24]])

print(a[1])
'''
# 取一行
[5 6 7 8]
'''

print(a[1:3])
'''
# 取多行
[[ 5  6  7  8]
 [ 9 10 11 12]]
'''

print(a[:, 1])
'''
# 取一列
[ 2  6 10 14 18 22]
'''

print(a[:, 1:3])
'''
# 取多列

[[ 2  3]
 [ 6  7]
 [10 11]
 [14 15]
 [18 19]
 [22 23]]

'''
##################################################3
print(a[[1, 3], :])
'''
# 取指定行的所有列
[[ 5  6  7  8]
 [13 14 15 16]]
'''

print(a[:, [1, 3]])
'''
# 取指定列
[[ 2  4]
 [ 6  8]
 [10 12]
 [14 16]
 [18 20]
 [22 24]]
'''

print(a[[1, 3], [2, 3]])
'''
# 取交点
[ 7 16]
'''

print(a > 10)
'''
# 布尔值索引
[[False False False False]
 [False False False False]
 [False False False  True]
 [ True  True False  True]
 [ True  True False  True]
 [ True  True False  True]]
'''
print(a[a>10])
'''
# 获取数组中大于10的
[11 12 13 14 15 16 17 18 19 20 21 22 23 24]
'''
```
### nunpy值修改
```python
import numpy as np

a = np.array([[1, 2, 3, 4], [5, 6, 7, 8], [9, 10, 11, 12], [13, 14, 15, 16], [17, 18, 19, 20], [21, 22, 23, 24]])

a[:, 2:3] = 0
print(a)
'''
# 修改指定列的值
[[ 1  2  0  4]
 [ 5  6  0  8]
 [ 9 10  0 12]
 [13 14  0 16]
 [17 18  0 20]
 [21 22  0 24]]
'''


a[a>10] = 0
print(a)
'''
# 修改数组中大于10的值
[[ 1  2  3  4]
 [ 5  6  7  8]
 [ 9 10  0  0]
 [ 0  0  0  0]
 [ 0  0  0  0]
 [ 0  0  0  0]]
'''

a = np.where(a>10, 0, 10)
print(a)
'''
# numpy中的三元运算符合， 大于10替换为10， 小于10的替换为0
[[10 10 10 10]
 [10 10 10 10]
 [10 10  0  0]
 [ 0  0  0  0]
 [ 0  0  0  0]
 [ 0  0  0  0]]
'''

a = a.clip(10, 13)
print(a)
'''
# 裁剪， 小于10的 替换为10， 大于13的替换为13
[[10 10 10 10]
 [10 10 10 10]
 [10 10 11 12]
 [13 13 13 13]
 [13 13 13 13]
 [13 13 13 13]]
'''
```

### numpy中的nan和inf
>- nan(NAN,Nan):not a number表示不是一个数字
>>- 什么时候numpy中会出现nan：
>>>- 当我们读取本地的文件为float的时候，如果有缺失，就会出现nan
>>>- 当做了一个不合适的计算的时候(比如无穷大(inf)减去无穷大)
>>>- nan做任何运行都是nan

1. 两个nan不相等
```
In [2]: np.nan == np.nan
Out[2]: False

In [3]: np.nan != np.nan
Out[3]: True
```
2. 统计数组中nan的个数
```
a = np.arange(1, 21, 1, dtype=np.float)
a[3:5] = np.nan
# array([ 1.,  2.,  3., nan, nan,  6.,  7.,  8.,  9., 10., 11., 12., 13., 14., 15., 16., 17., 18., 19., 20.])
np.count_nonzero(a!=a)
Out: 2
```
3. 替换数组中nan
```python
import numpy as np
a = np.arange(1, 21, 1, dtype=np.float)
a[3:5] = np.nan
a[np.isnan(a)] = 0 # 替换nan为0
a[np.isnan(a)] = a[a==a].mean()  # 替换为均值

```

2. 
>- inf(-inf,inf):infinity,inf表示正无穷，-inf表示负无穷
>>- 什么时候回出现inf包括（-inf，+inf）
>>>- 比如一个数字除以0，（python中直接会报错，numpy中是一个inf或者-inf）

```python
import numpy as np
np.nan  # float类型
np.inf  # float类型
```
### numpy中常用统计函数
    求和：t.sum(axis=None)
    均值：t.mean(a,axis=None)  受离群点的影响较大
    中值：np.median(t,axis=None) 
    最大值：t.max(axis=None) 
    最小值：t.min(axis=None)
    极值：np.ptp(t,axis=None) 即最大值和最小值只差
    标准差：t.std(axis=None) 
    数组中不为零的元素个数： t.count_nonzero()
### 数组的拼接
![](https://note.youdao.com/yws/public/resource/4d9f2b353221035aa2dc87736c84e628/xmlnote/22CFDAD0DE0A496885A6FEF360B6B90D/7570)
### 数组的行列交换
![](https://note.youdao.com/yws/public/resource/4d9f2b353221035aa2dc87736c84e628/xmlnote/72322D94D80640EF80A169A6A9D9D7CF/7572)

### numpy其他方法
    获取最大值最小值的位置
      np.argmax(t,axis=0)
      np.argmin(t,axis=1)
    创建一个全0的数组: np.zeros((3,4))
    创建一个全1的数组:np.ones((3,4))
    创建一个对角线为1的正方形数组(方阵)：np.eye(3)
### numpy生成随机数
![](https://note.youdao.com/yws/public/resource/4d9f2b353221035aa2dc87736c84e628/xmlnote/2CD7DAA5FDF34BDFAD60EDC67A963E9A/7574)



# NumPy总结
>- arr = np.array()
>- arr = np.arange()

>- arr.astype() 












